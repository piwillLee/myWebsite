import"./base-1c9c4335.js";import{E as F}from"./el-button-ace9ab88.js";import{E as Q,a as Z}from"./el-col-84ef6340.js";import{a as M,E as $}from"./el-form-506b4363.js";import{E as j,a as G}from"./el-overlay-d8da88b4.js";import{E as B}from"./el-input-6d4fc90e.js";import"./el-scrollbar-37ff8c07.js";import"./el-popper-cc8f8f8f.js";import"./el-tag-1c4debd0.js";import{E as z,a as T}from"./format-84c5559f.js";import{u as H,a as J}from"./system-0f663a0a.js";import{d as L,K as A,E as v,u as D,o as c,c as E,a as u,w as r,ad as x,ah as N,a0 as h,ac as y,O,ag as U,_ as q,Z as W}from"./_plugin-vue_export-helper-fbc28b02.js";import{d as X}from"./login-540fea95.js";import{s as Y}from"./index-bb78072d.js";const ee={key:0,class:"page-search"},oe={class:"btns"},le=L({__name:"page-search",props:{searchConfig:null},emits:["searchClick","resetClick"],setup(n,{emit:f}){const t=n,p=H(`${t.searchConfig.pageName}:query`),l={};for(const d of t.searchConfig.formItems)l[d.prop]=d.initialValue??"";const e=A(l),g=v(),P=()=>{var d;(d=g.value)==null||d.resetFields(),f("resetClick",e)},I=()=>{console.log(e),f("searchClick",e)};return(d,C)=>{const w=B,R=z,s=T,i=j,_=$,V=Q,b=Z,S=F;return D(p)?(c(),E("div",ee,[u(D(M),{ref_key:"formRef",ref:g,"label-width":"120px",model:e},{default:r(()=>[u(b,{gutter:20},{default:r(()=>[(c(!0),E(x,null,N(n.searchConfig.formItems,o=>(c(),h(V,{key:o.prop,span:8},{default:r(()=>[u(_,{label:o.label,size:"large",prop:o.prop},{default:r(()=>[o.type==="input"?(c(),h(w,{key:0,modelValue:e[o.prop],"onUpdate:modelValue":m=>e[o.prop]=m,placeholder:o.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):y("",!0),o.type==="select"?(c(),h(s,{key:1,modelValue:e[o.prop],"onUpdate:modelValue":m=>e[o.prop]=m,placeholder:o.placeholder},{default:r(()=>[u(R,{label:o.options[0].label,value:o.options[0].value},null,8,["label","value"]),u(R,{label:o.options[1].label,value:o.options[1].value},null,8,["label","value"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):y("",!0),o.type==="date-picker"?(c(),h(i,{key:2,modelValue:e[o.prop],"onUpdate:modelValue":m=>e[o.prop]=m,type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","onUpdate:modelValue"])):y("",!0)]),_:2},1032,["label","prop"])]),_:2},1024))),128))]),_:1})]),_:1},8,["model"]),O("div",oe,[u(S,{icon:"Refresh",size:"large",onClick:P},{default:r(()=>[U("重置")]),_:1}),u(S,{icon:"Search",size:"large",type:"primary",onClick:I},{default:r(()=>[U("查询")]),_:1})])])):y("",!0)}}});const Ve=q(le,[["__scopeId","data-v-b3ae712b"]]),ae={class:"user-modal"},te={class:"dialog-footer"},ne=L({__name:"page-modal",props:{modalConfig:null,otherInfo:null},setup(n,{expose:f}){const t=n,p={};for(const s of t.modalConfig.formItems)p[s.prop]=s.initialValue??"";const l=A(p),e=v(!1),g=X(),P=J();Y(g);const I=v(),d=v(!1),C=v();function w(s=!0,i){if(e.value=!0,d.value=s,!s&&i){for(const _ in l)l[_]=i[_];C.value=i}else{for(const _ in l){const V=t.modalConfig.formItems.find(b=>b.prop===_);l[_]=V?V.initialValue:""}C.value=null}}function R(){e.value=!1;let s=l;t.otherInfo&&(s={...s,...t.otherInfo}),!d.value&&C.value?P.updataPageAction(t.modalConfig.pageName,C.value.id,s):(P.newPageDataAction(t.modalConfig.pageName,s),I.value.resetFields())}return f({setModalVisible:w}),(s,i)=>{const _=B,V=z,b=T,S=$,o=M,m=F,K=G;return c(),E("div",ae,[u(K,{modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=a=>e.value=a),title:d.value?n.modalConfig.header.newTitle:n.modalConfig.header.editTitle,width:"30%",center:""},{footer:r(()=>[O("span",te,[u(m,{onClick:i[0]||(i[0]=a=>e.value=!1)},{default:r(()=>[U("取消")]),_:1}),u(m,{type:"primary",onClick:R},{default:r(()=>[U(" 确定 ")]),_:1})])]),default:r(()=>[u(o,{ref_key:"formRef",ref:I,"label-width":"120px",model:l},{default:r(()=>[(c(!0),E(x,null,N(n.modalConfig.formItems,a=>(c(),h(S,{key:a.prop,label:a.label,size:"large",prop:a.prop},{default:r(()=>[a.type==="input"?(c(),h(_,{key:0,modelValue:l[a.prop],"onUpdate:modelValue":k=>l[a.prop]=k,placeholder:a.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):y("",!0),a.type==="select"?(c(),h(b,{key:1,modelValue:l[a.prop],"onUpdate:modelValue":k=>l[a.prop]=k,placeholder:a.placeholder,style:{width:"100%"}},{default:r(()=>[(c(!0),E(x,null,N(a.options,k=>(c(),h(V,{key:a.id,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):y("",!0),a.type==="custom"?W(s.$slots,a.slotName,{key:2},void 0,!0):y("",!0)]),_:2},1032,["label","prop"]))),128))]),_:3},8,["model"])]),_:3},8,["modelValue","title"])])}}});const ke=q(ne,[["__scopeId","data-v-3aee5870"]]);function Ce(){const n=v();function f(p){var l;(l=n.value)==null||l.fetchPageListData(p)}function t(){var p;(p=n.value)==null||p.fetchPageListData()}return{contentRef:n,handleSearchClick:f,handleResetClick:t}}function be(n,f){const t=v();function p(){var e;(e=t.value)==null||e.setModalVisible(),n&&n()}function l(e){var g;(g=t.value)==null||g.setModalVisible(!1,e),f&&f(e)}return{modalRef:t,handleNewPageClick:p,handleEditPageClick:l}}export{Ve as P,be as a,ke as b,Ce as u};
