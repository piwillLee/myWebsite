import{G as be,d as fe,e as le,i as ke,v as _e,T as Ce,U as Ie,w as pe}from"./base-1c9c4335.js";import{u as xe,a as Ee,P as ze,b as Le}from"./usePageModal-885e7fd5.js";import{P as Ne}from"./page-content-0d605817.js";import{m as me,e as Se,u as M,E as P}from"./index-5d13da39.js";import{d as T,i as ue,u as ve,E as S,_ as ge,g as Re,w as Te}from"./index-dccea06b.js";import{A as Oe,B as $e,j as Ae,k as Be,d as Pe,C as Me,D as Ve,F as De,G as Fe}from"./index-bb786a3b.js";import{u as we}from"./el-scrollbar-37ff8c07.js";import{i as Ye,j as Xe}from"./format-84c5559f.js";import{d as H,R as de,E as I,Q as He,J as Ue,G as x,M as se,L as he,a3 as ye,o as h,a0 as re,a as i,w as C,O as w,a2 as p,u as e,$ as ie,ac as E,c as N,ad as ce,a1 as je,ah as We,ae as Ge,Z as ee,ap as Ze,av as qe,ab as Je,a4 as Ke,b as Qe,_ as et}from"./_plugin-vue_export-helper-fbc28b02.js";import{u as tt}from"./el-input-6d4fc90e.js";import"./el-button-ace9ab88.js";import"./icon-db147a39.js";import"./el-col-84ef6340.js";import"./el-form-506b4363.js";import"./el-checkbox-df777527.js";import"./el-overlay-d8da88b4.js";import"./el-popper-cc8f8f8f.js";import"./vnode-b24997ec.js";import"./refs-6b7ebabd.js";import"./el-tag-1c4debd0.js";import"./system-0f663a0a.js";import"./login-540fea95.js";import"./index-bb78072d.js";var at="Expected a function";function oe(u,f,l){var o=!0,m=!0;if(typeof u!="function")throw new TypeError(at);return be(l)&&(o="leading"in l?!!l.leading:o,m="trailing"in l?!!l.trailing:m),Ye(u,f,{leading:o,maxWait:f,trailing:m})}const nt=(u,f)=>{if(!T||!u||!f)return!1;const l=u.getBoundingClientRect();let o;return f instanceof Element?o=f.getBoundingClientRect():o={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},l.top<o.bottom&&l.bottom>o.top&&l.right>o.left&&l.left<o.right},ot=()=>T&&/firefox/i.test(window.navigator.userAgent),lt=fe({urlList:{type:le(Array),default:()=>me([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),st={close:()=>!0,switch:u=>ue(u)},rt=["src"],it=H({name:"ElImageViewer"}),ct=H({...it,props:lt,emits:st,setup(u,{expose:f,emit:l}){const o=u,m={CONTAIN:{name:"contain",icon:de(Oe)},ORIGINAL:{name:"original",icon:de($e)}},y=ot()?"DOMMouseScroll":"mousewheel",{t:V}=we(),r=ve("image-viewer"),{nextZIndex:O}=Se(),v=I(),g=I([]),$=He(),b=I(!0),d=I(o.initialIndex),A=Ue(m.CONTAIN),c=I({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),D=x(()=>{const{urlList:t}=o;return t.length<=1}),U=x(()=>d.value===0),j=x(()=>d.value===o.urlList.length-1),F=x(()=>o.urlList[d.value]),te=x(()=>{const{scale:t,deg:n,offsetX:s,offsetY:k,enableTransition:z}=c.value;let _=s/t,L=k/t;switch(n%360){case 90:case-270:[_,L]=[L,-_];break;case 180:case-180:[_,L]=[-_,-L];break;case 270:case-90:[_,L]=[-L,_];break}const B={transform:`scale(${t}) rotate(${n}deg) translate(${_}px, ${L}px)`,transition:z?"transform .3s":""};return A.value.name===m.CONTAIN.name&&(B.maxWidth=B.maxHeight="100%"),B}),W=x(()=>ue(o.zIndex)?o.zIndex:O());function R(){ne(),l("close")}function ae(){const t=oe(s=>{switch(s.code){case P.esc:o.closeOnPressEscape&&R();break;case P.space:J();break;case P.left:K();break;case P.up:a("zoomIn");break;case P.right:Q();break;case P.down:a("zoomOut");break}}),n=oe(s=>{(s.wheelDelta?s.wheelDelta:-s.detail)>0?a("zoomIn",{zoomRate:o.zoomRate,enableTransition:!1}):a("zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})});$.run(()=>{M(document,"keydown",t),M(document,y,n)})}function ne(){$.stop()}function G(){b.value=!1}function Z(t){b.value=!1,t.target.alt=V("el.image.error")}function q(t){if(b.value||t.button!==0||!v.value)return;c.value.enableTransition=!1;const{offsetX:n,offsetY:s}=c.value,k=t.pageX,z=t.pageY,_=oe(B=>{c.value={...c.value,offsetX:n+B.pageX-k,offsetY:s+B.pageY-z}}),L=M(document,"mousemove",_);M(document,"mouseup",()=>{L()}),t.preventDefault()}function Y(){c.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function J(){if(b.value)return;const t=Ie(m),n=Object.values(m),s=A.value.name,z=(n.findIndex(_=>_.name===s)+1)%t.length;A.value=m[t[z]],Y()}function X(t){const n=o.urlList.length;d.value=(t+n)%n}function K(){U.value&&!o.infinite||X(d.value-1)}function Q(){j.value&&!o.infinite||X(d.value+1)}function a(t,n={}){if(b.value)return;const{zoomRate:s,rotateDeg:k,enableTransition:z}={zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0,...n};switch(t){case"zoomOut":c.value.scale>.2&&(c.value.scale=Number.parseFloat((c.value.scale/s).toFixed(3)));break;case"zoomIn":c.value.scale<7&&(c.value.scale=Number.parseFloat((c.value.scale*s).toFixed(3)));break;case"clockwise":c.value.deg+=k;break;case"anticlockwise":c.value.deg-=k;break}c.value.enableTransition=z}return se(F,()=>{he(()=>{const t=g.value[0];t!=null&&t.complete||(b.value=!0)})}),se(d,t=>{Y(),l("switch",t)}),ye(()=>{var t,n;ae(),(n=(t=v.value)==null?void 0:t.focus)==null||n.call(t)}),f({setActiveItem:X}),(t,n)=>(h(),re(Ze,{to:"body",disabled:!t.teleported},[i(Ce,{name:"viewer-fade",appear:""},{default:C(()=>[w("div",{ref_key:"wrapper",ref:v,tabindex:-1,class:p(e(r).e("wrapper")),style:ie({zIndex:e(W)})},[w("div",{class:p(e(r).e("mask")),onClick:n[0]||(n[0]=ke(s=>t.hideOnClickModal&&R(),["self"]))},null,2),E(" CLOSE "),w("span",{class:p([e(r).e("btn"),e(r).e("close")]),onClick:R},[i(e(S),null,{default:C(()=>[i(e(Ae))]),_:1})],2),E(" ARROW "),e(D)?E("v-if",!0):(h(),N(ce,{key:0},[w("span",{class:p([e(r).e("btn"),e(r).e("prev"),e(r).is("disabled",!t.infinite&&e(U))]),onClick:K},[i(e(S),null,{default:C(()=>[i(e(Be))]),_:1})],2),w("span",{class:p([e(r).e("btn"),e(r).e("next"),e(r).is("disabled",!t.infinite&&e(j))]),onClick:Q},[i(e(S),null,{default:C(()=>[i(e(Pe))]),_:1})],2)],64)),E(" ACTIONS "),w("div",{class:p([e(r).e("btn"),e(r).e("actions")])},[w("div",{class:p(e(r).e("actions__inner"))},[i(e(S),{onClick:n[1]||(n[1]=s=>a("zoomOut"))},{default:C(()=>[i(e(Me))]),_:1}),i(e(S),{onClick:n[2]||(n[2]=s=>a("zoomIn"))},{default:C(()=>[i(e(Ve))]),_:1}),w("i",{class:p(e(r).e("actions__divider"))},null,2),i(e(S),{onClick:J},{default:C(()=>[(h(),re(je(e(A).icon)))]),_:1}),w("i",{class:p(e(r).e("actions__divider"))},null,2),i(e(S),{onClick:n[3]||(n[3]=s=>a("anticlockwise"))},{default:C(()=>[i(e(De))]),_:1}),i(e(S),{onClick:n[4]||(n[4]=s=>a("clockwise"))},{default:C(()=>[i(e(Fe))]),_:1})],2)],2),E(" CANVAS "),w("div",{class:p(e(r).e("canvas"))},[(h(!0),N(ce,null,We(t.urlList,(s,k)=>Ge((h(),N("img",{ref_for:!0,ref:z=>g.value[k]=z,key:s,src:s,style:ie(e(te)),class:p(e(r).e("img")),onLoad:G,onError:Z,onMousedown:q},null,46,rt)),[[_e,k===d.value]])),128))],2),ee(t.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ut=ge(ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const dt=pe(ut),ft=fe({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:le([String,Object])},previewSrcList:{type:le(Array),default:()=>me([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),pt={load:u=>u instanceof Event,error:u=>u instanceof Event,switch:u=>ue(u),close:()=>!0,show:()=>!0},mt=["src","loading"],vt={key:0},gt=H({name:"ElImage",inheritAttrs:!1}),wt=H({...gt,props:ft,emits:pt,setup(u,{emit:f}){const l=u;let o="";const{t:m}=we(),y=ve("image"),V=qe(),r=tt(),O=I(),v=I(!1),g=I(!0),$=I(!1),b=I(),d=I(),A=T&&"loading"in HTMLImageElement.prototype;let c,D;const U=x(()=>V.style),j=x(()=>{const{fit:a}=l;return T&&a?{objectFit:a}:{}}),F=x(()=>{const{previewSrcList:a}=l;return Array.isArray(a)&&a.length>0}),te=x(()=>{const{previewSrcList:a,initialIndex:t}=l;let n=t;return t>a.length-1&&(n=0),n}),W=x(()=>l.loading==="eager"?!1:!A&&l.loading==="lazy"||l.lazy),R=()=>{T&&(g.value=!0,v.value=!1,O.value=l.src)};function ae(a){g.value=!1,v.value=!1,f("load",a)}function ne(a){g.value=!1,v.value=!0,f("error",a)}function G(){nt(b.value,d.value)&&(R(),Y())}const Z=Te(G,200);async function q(){var a;if(!T)return;await he();const{scrollContainer:t}=l;Re(t)?d.value=t:Qe(t)&&t!==""?d.value=(a=document.querySelector(t))!=null?a:void 0:b.value&&(d.value=Xe(b.value)),d.value&&(c=M(d,"scroll",Z),setTimeout(()=>G(),100))}function Y(){!T||!d.value||!Z||(c==null||c(),d.value=void 0)}function J(a){if(a.ctrlKey){if(a.deltaY<0)return a.preventDefault(),!1;if(a.deltaY>0)return a.preventDefault(),!1}}function X(){F.value&&(D=M("wheel",J,{passive:!1}),o=document.body.style.overflow,document.body.style.overflow="hidden",$.value=!0,f("show"))}function K(){D==null||D(),document.body.style.overflow=o,$.value=!1,f("close")}function Q(a){f("switch",a)}return se(()=>l.src,()=>{W.value?(g.value=!0,v.value=!1,Y(),q()):R()}),ye(()=>{W.value?q():R()}),(a,t)=>(h(),N("div",{ref_key:"container",ref:b,class:p([e(y).b(),a.$attrs.class]),style:ie(e(U))},[O.value!==void 0&&!v.value?(h(),N("img",Je({key:0},e(r),{src:O.value,loading:a.loading,style:e(j),class:[e(y).e("inner"),e(F)&&e(y).e("preview"),g.value&&e(y).is("loading")],onClick:X,onLoad:ae,onError:ne}),null,16,mt)):E("v-if",!0),g.value||v.value?(h(),N("div",{key:1,class:p(e(y).e("wrapper"))},[g.value?ee(a.$slots,"placeholder",{key:0},()=>[w("div",{class:p(e(y).e("placeholder"))},null,2)]):v.value?ee(a.$slots,"error",{key:1},()=>[w("div",{class:p(e(y).e("error"))},Ke(e(m)("el.image.error")),3)]):E("v-if",!0)],2)):E("v-if",!0),e(F)?(h(),N(ce,{key:2},[$.value?(h(),re(e(dt),{key:0,"z-index":a.zIndex,"initial-index":e(te),infinite:a.infinite,"zoom-rate":a.zoomRate,"url-list":a.previewSrcList,"hide-on-click-modal":a.hideOnClickModal,teleported:a.previewTeleported,"close-on-press-escape":a.closeOnPressEscape,onClose:K,onSwitch:Q},{default:C(()=>[a.$slots.viewer?(h(),N("div",vt,[ee(a.$slots,"viewer")])):E("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):E("v-if",!0)],64)):E("v-if",!0)],6))}});var ht=ge(wt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const yt=pe(ht);const bt={pageName:"goods",formItems:[{type:"input",prop:"name",label:"商品名称",placeholder:"请输入商品名称"},{type:"input",prop:"address",label:"商品地址",placeholder:"请输入商品地址"},{type:"select",prop:"status",label:"状态",placeholder:"请选择状态",options:[{label:"可用",value:1},{label:"下架",value:0}]},{type:"date-picker",prop:"createAt",label:"创建时间"}]},kt=bt,_t={pageName:"goods",header:{title:"商品列表",btnTitle:"新建商品"},propsList:[{type:"selection",label:"选择",width:"50px"},{type:"index",label:"序号",width:"50px"},{type:"normal",label:"商品名称",prop:"name",width:"120px"},{type:"normal",label:"原价格",prop:"oldPrice",width:"80px"},{type:"normal",label:"新价格",prop:"newPrice",width:"80px"},{type:"normal",label:"商品描述",prop:"desc",width:"120px"},{type:"normal",label:"状态",prop:"status",width:"80px"},{type:"custom",label:"图片",prop:"imgUrl",width:"200px",slotName:"imageSlot"},{type:"normal",label:"库存",prop:"inventoryCount",width:"60px"},{type:"normal",label:"销量",prop:"saleCount",width:"80px"},{type:"normal",label:"收藏",prop:"favorCount",width:"80px"},{type:"normal",label:"地址",prop:"address",width:"80px"},{type:"timer",label:"创建时间",prop:"createAt"},{type:"timer",label:"更新时间",prop:"updateAt"},{type:"handler",label:"操作",width:"150px"}]},Ct=_t,It={pageName:"goods",header:{newTitle:"新建类别",editTitle:"编辑类别"},formItems:[{type:"input",label:"商品名称",prop:"name",placeholder:"请输入商品名称"}]},xt=It,Et={class:"goods"},zt=H({__name:"goods",setup(u){const{contentRef:f,handleSearchClick:l,handleResetClick:o}=xe(),{modalRef:m,handleNewPageClick:y,handleEditPageClick:V}=Ee();return(r,O)=>{const v=yt;return h(),N("div",Et,[i(ze,{searchConfig:e(kt),onSearchClick:e(l),onResetClick:e(o)},null,8,["searchConfig","onSearchClick","onResetClick"]),i(Ne,{contentConfig:e(Ct),ref_key:"contentRef",ref:f,onNewUserBtnClick:e(y),onEditUserBtnClick:e(V)},{imageSlot:C(g=>[i(v,{style:{width:"100%","max-height":"100px"},src:g.row.imgUrl,"preview-src-list":[g.row.imgUrl]},null,8,["src","preview-src-list"])]),_:1},8,["contentConfig","onNewUserBtnClick","onEditUserBtnClick"]),i(Le,{modalConfig:e(xt),ref_key:"modalRef",ref:m},null,8,["modalConfig"])])}}});const Jt=et(zt,[["__scopeId","data-v-331e0c1a"]]);export{Jt as default};
